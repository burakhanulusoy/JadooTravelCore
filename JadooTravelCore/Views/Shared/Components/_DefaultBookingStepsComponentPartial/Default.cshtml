@model CreateReceiverMessageDto

@*
   bookingsteps component partial
*@
<section id="booking">

    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="mb-4 text-start">
                    <h5 class="text-secondary" data-i18n="hızlı">Hızlı Ve Güvenilir </h5>
                    <h3 data-i18n="booking.title" class="fs-xl-10 fs-lg-8 fs-7 fw-bold font-cursive text-capitalize">
                        Bir sonraki seyahatinizi 3 kolay adımda ayırtın.
                    </h3>
                </div>
                <div class="d-flex align-items-start mb-5">
                    <div class="bg-primary me-sm-4 me-3 p-3" style="border-radius: 13px"> <img src="~/public/assets/img/steps/selection.svg" width="22" alt="steps" /></div>
                    <div class="flex-1">
                        <h5 data-i18n="booking.step1.title" class="text-secondary fw-bold fs-0">Seyehat Ülkenizi Seçin</h5>
                        <p data-i18n="booking.step1.desc">En sevdiğiniz yeri seçin, <br class="d-none d-sm-block">Dünya'nın neresinde olursa olsun.</p>
                    </div>
                </div>
                <div class="d-flex align-items-start mb-5">
                    <div class="bg-danger me-sm-4 me-3 p-3" style="border-radius: 13px"> <img src="~/public/assets/img/steps/water-sport.svg" width="22" alt="steps" /></div>
                    <div class="flex-1">
                        <h5 data-i18n="booking.step2.title" class="text-secondary fw-bold fs-0">Ödeme Yap</h5>
                        <p data-i18n="booking.step2.desc">Mükemmel yerinizi bulduktan sonra, <br class="d-none d-sm-block">ödemenizi yapın ve seyahate hazır olun.</p>
                    </div>
                </div>
                <div class="d-flex align-items-start mb-5">
                    <div class="bg-info me-sm-4 me-3 p-3" style="border-radius: 13px"> <img src="~/public/assets/img/steps/taxi.svg" width="22" alt="steps" /></div>
                    <div class="flex-1">
                        <h5 data-i18n="booking.step3.title" class="text-secondary fw-bold fs-0">Seçilen Tarihte Havaalanına Ulaşın</h5>
                        <p data-i18n="booking.step3.desc">Birlikte istediğiniz yerde<br class="d-none d-sm-block">keşfedin,gezin,hayatın tadını çıkartın.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 d-flex justify-content-center align-items-start">

                <form id="contactForm" method="post" class="contact-form p-4 rounded" style="background: rgba(255,255,255,0.95); box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 100%; max-width: 450px;" asp-action="SendMessage" asp-controller="Default" data-aos="fade-up" data-aos-delay="200">
                    @Html.AntiForgeryToken()

                    <h1 data-i18n="form.title" class="text-center contact-title">💼 Size Özel Teklif Alın</h1>
                    <h2 data-i18n="form.subtitle" class="text-center contact-subtitle">Hayalinizdeki yolculuğa bir adım uzaklıktasınız! İletişim bilgilerinizi ve seyahat tercihlerinizi paylaşın, size özel en uygun fırsatları sunalım..</h2>

                    <input data-i18n="form.name" type="text" placeholder="Adınız ve Soyadınız" class="form-control mb-3" asp-for="NameSurname" required />
                    <input data-i18n="form.email" type="email" placeholder="Mail Adresiniz" class="form-control mb-3" asp-for="Email" required />
                    <input data-i18n="form.phone" type="tel" placeholder="Telefon Numaranız" class="form-control mb-3" asp-for="PhoneNumber" required />
                    <textarea data-i18n="form.message" placeholder="Mesajınız" class="form-control mb-3" rows="4" asp-for="Message" required></textarea>
                    <button data-i18n="form.button" class="btn btn-primary w-100" type="submit">Gönder</button>
                </form>

            </div>
        </div>
    </div><!-- end of .container-->

</section>

<style>
    /* Apple benzeri font ve modern görünüm */
    .contact-form {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    }

    .contact-title {
        font-size: 3rem;
        font-weight: 600;
        margin-bottom: 10px;
        color: #111;
    }

    .contact-subtitle {
        font-size: 1.1rem;
        font-weight: 400;
        margin-bottom: 30px;
        color: #333;
    }

    .form-control {
        border-radius: 8px;
    }

    .btn-primary {
        border-radius: 8px;
        padding: 10px;
        font-size: 1.1rem;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault(); // Formun normal submit işlemini engelle

        // Form verilerini topla
        const formData = new FormData(this);

        // AJAX ile formu gönder
        fetch(this.action, {
            method: 'POST',
            body: formData,
            headers: {
                'RequestVerificationToken': document.querySelector('input[name="__RequestVerificationToken"]').value
            }
        })
        .then(response => {
            if (response.ok) {
                // Başarılı olursa SweetAlert göster
                Swal.fire({
                    title: "Tebrikler!",
                    text: "Mesajınız başarıyla gönderildi. 6 saniye içinde ana sayfaya yönlendirileceksiniz.",
                    icon: "success",
                    confirmButtonText: "Tamam",
                    timer: 6000,
                    timerProgressBar: true,
                    willClose: () => {
                        // Timer bitince veya kullanıcı kapatınca ana sayfaya yönlendir
                        window.location.href = '/'; // veya '/Default/Index'
                    }
                }).then((result) => {
                    // Kullanıcı manuel olarak Tamam'a basarsa da yönlendir
                    if (result.isConfirmed || result.dismiss === Swal.DismissReason.timer) {
                        window.location.href = '/Default/Index';
                    }
                });
            } else {
                throw new Error('Form gönderilemedi');
            }
        })
        .catch(error => {
            Swal.fire({
                title: "Hata!",
                text: "Mesajınız gönderilirken bir hata oluştu.",
                icon: "error",
                confirmButtonText: "Tamam"
            });
        });
    });
</script>